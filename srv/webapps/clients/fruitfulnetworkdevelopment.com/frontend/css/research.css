/* ======================================
   CALENDAR - SECTION
  ====================================== */

/* Root variables for sizing */
.section-calendar {
   --offset-unit: 1.5rem; /* horizontal/vertical indentation per offset unit */
   --circle-size: 1.1rem; /* diameter of each day cell */
   font-family: "Lato", sans-serif;
    color: var(--nero);
 }
 
 /* Ensure tables have no inherent spacing */
 .section-calendar table {
   border-collapse: collapse;
   margin: 0;
   padding: 0;
 }
 
 /* Assign offsets for each month; the value applies both horizontally (desktop)
    and vertically (mobile) to align the month relative to the day-of-week. */
 .section-calendar .month.january   { --offset: 5; }
 .section-calendar .month.february  { --offset: 1; }
 .section-calendar .month.march     { --offset: 3; }
 .section-calendar .month.april     { --offset: 6; }
 .section-calendar .month.may       { --offset: 1; }
 .section-calendar .month.june      { --offset: 6; }
 .section-calendar .month.july      { --offset: 7; }
 .section-calendar .month.august    { --offset: 1; }
 .section-calendar .month.september { --offset: 5; }
 .section-calendar .month.october   { --offset: 0; }
 .section-calendar .month.november  { --offset: 3; }
 .section-calendar .month.december  { --offset: 3; }

/*
 * The weekday header rows (the first and last tables in the calendar) need to
 * align with the first day of January.  To achieve this the header is given
 * its own offset of 5, matching the offset assigned to January.  This
 * variable is subsequently used by the responsive rules to shift the
 * header rightward on desktop and downward on mobile.
 */
.section-calendar .month.weekdays {
  --offset: 5;
}
 
/* Style weekday header cells.  Weight and case are common to both layouts. */
.section-calendar .month.weekdays td {
  font-weight: bold;
  text-transform: uppercase;
  font-size: 0.7rem;
  /* padding and white-space will be overridden in responsive rules */
}
 
 /* Desktop (wide viewport) styles */
 @media (min-width: 768px) {
   /* Container holds all tables; stack them vertically */
   .section-calendar .calendar-blocks {
     display: block;
   }
   /* Show the first and last weekday rows.  Shift them right by their
      offset so that the day names line up with the month that starts
      with the same offset (January has an offset of 5). */
   .section-calendar .month.weekdays {
     display: block;
     width: 100%;
     /* apply horizontal indentation based on header offset */
     margin-left: calc(var(--offset) * var(--offset-unit));
     margin-bottom: 0.75rem;
   }
   .section-calendar .calendar-blocks table.month.weekdays:last-child {
     margin-top: 0.75rem;
   }
  /* Render the weekday row.  Each cell is displayed inline horizontally
     but the text inside is rotated vertically so the first, second and
     third letters of each abbreviation align in three horizontal bands. */
  .section-calendar .month.weekdays tr,
  .section-calendar .month.weekdays td {
    display: inline-block;
    white-space: nowrap;
  }
  .section-calendar .month.weekdays td {
    /* rotate day names into vertical columns */
    writing-mode: vertical-rl;
    text-orientation: upright;
    /* constrain width equal to day circle size so the vertical stack of
       letters aligns with the circles below */
    width: var(--circle-size);
    /* remove horizontal padding (set above) and add a small right margin */
    padding: 0;
    margin-right: 0.375rem;
  }
  
   /* Style month tables for horizontal flow */
   .section-calendar .calendar-blocks table.month:not(.weekdays) {
     /* Use flex to place month label and days row next to each other */
     display: flex;
     flex-direction: row;
     align-items: center;
     /* Use the offset to indent the entire month row to the right */
     margin-left: calc(var(--offset) * var(--offset-unit));
     margin-bottom: 0.5rem;
   }
   /* Month heading (e.g., JANUARY).  Reduce the width and padding so that
      the label sits closer to its row of circles. */
   .section-calendar .calendar-blocks table.month:not(.weekdays) thead {
     flex: 0 0 5rem;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) thead th {
     text-align: left;
     font-size: 0.8rem;
     text-transform: uppercase;
     padding-right: 0.25rem;
     white-space: nowrap;
   }
   /* Days row: break out of table layout */
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody {
     flex: 1;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody tr {
     display: block;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody td {
     display: inline-block;
     width: var(--circle-size);
     height: var(--circle-size);
     border-radius: 50%;
     background-color: var(--nero);
     color: var(--offwhite);
     text-align: center;
     line-height: var(--circle-size);
     margin-right: 0.3rem;
     font-size: 0.55rem;
   }
 }
 
 /* Mobile (narrow viewport) styles */
 @media (max-width: 767px) {
   /* The calendar-blocks container becomes a horizontal strip of vertical months */
   .section-calendar .calendar-blocks {
     display: flex;
     flex-direction: row;
     align-items: flex-start;
     overflow-x: auto;
   }
  /* In narrow view the weekday header tables become vertical
     lists on the left and right of the calendar. */
  /*
   * In the narrow/mobile layout the weekday header tables become
   * vertical lists that flank the grid of month columns.  Each list
   * must occupy a fixed width so that it doesn’t shrink as the user
   * scrolls horizontally, and its cells should stack top‑to‑bottom
   * with a small gap between entries.  Using a flex container allows
   * the single <tr> containing all weekday cells to break into a
   * column of rows.  The margin shorthand collapses the original
   * left/right spacing rules into a single property.
   */
  .section-calendar .month.weekdays {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex-shrink: 0;
    /* reserve horizontal space roughly equal to the day cell width
       plus a little extra for legibility */
    width: calc(var(--circle-size) * 1.8);
    /* push the weekday list downward so that its first entry aligns with
       the first day of January (offset of 5).  The vertical offset
       uses the same unit as month offsets. */
    margin-top: calc(var(--offset) * var(--offset-unit));
    margin-left: 0.5rem;
    margin-right: 0.5rem;
  }
  .section-calendar .month.weekdays tr {
    display: flex;
    flex-direction: column;
    margin: 0;
    padding: 0;
  }
  .section-calendar .month.weekdays td {
    display: block;
    padding: 0;
    margin: 0;
    /* space between weekday labels to align with the circle gap */
    margin-bottom: 0.3rem;
    width: 100%;
    white-space: nowrap;
    text-align: left;
    /* capitalize so that Sun/MON look consistent */
    text-transform: capitalize;
  }
   /* Each month becomes a vertical column. The offset pushes it downward. */
   .section-calendar .calendar-blocks table.month:not(.weekdays) {
     display: flex;
     flex-direction: column;
     align-items: center;
     margin-right: 0.75rem;
     margin-top: calc(var(--offset) * var(--offset-unit));
   }
  /* Rotate and stack the month heading vertically.  The text flows top-to-bottom
     without being flipped so the first letter appears at the top. */
  .section-calendar .calendar-blocks table.month:not(.weekdays) thead th {
    writing-mode: vertical-rl;
    text-orientation: upright;
    /* remove the 180deg rotation so letters are not upside down */
    transform: none;
    font-size: 0.7rem;
    margin-bottom: 0.5rem;
    white-space: nowrap;
    /* center the rotated text relative to its column */
    align-self: center;
  }
   /* Days column: show each day as its own row */
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody tr {
     display: flex;
     flex-direction: column;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody td {
     display: block;
     width: var(--circle-size);
     height: var(--circle-size);
     border-radius: 50%;
     background-color: var(--nero);
     color: var(--offwhite);
     line-height: var(--circle-size);
     margin-bottom: 0.3rem;
     font-size: 0.55rem;
   }
 }

/* ======================================
   ROADMAP - SECTION
  ====================================== */
/* ----------------------------------------------------------------- */
/*  GENERAL TYPE OVERRIDES                                           */
.section-overview,
.section-overview h2,
.section-overview h3,
.section-overview p,
.section-overview li {
}
/* ----------------------------------------------------------------- */

.section-roadmap {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--space-lg) var(--space-md);
}

/* Grid to arrange milestone cards and timeline markers */
.roadmap-grid {
  display: grid;
  grid-template-columns: 1fr 2rem 1fr;
  grid-auto-rows: auto;
  gap: var(--space-lg);
  position: relative;
}

/* Topmost node to begin the timeline.  Aligns to the centre
   column. */
.timeline-node.top-node {
  grid-column: 2;
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 50%;
  background-color: var(--nero);
  justify-self: center;
}

/* Vertical group of nodes between milestone cards */
.timeline-nodes {
  grid-column: 2;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-xs) 0;
  /* Give the timeline groups a minimum height so nodes are always
     visible even when there is a single marker (e.g. the final
     milestone). */
  min-height: 3rem;
}

/* Draw the connecting vertical line through the centre of the
   timeline column.  It extends the full height of each group. */
.timeline-nodes::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 2px;
  background-color: var(--silverback);
  transform: translateX(-50%);
}

/* Individual nodes */
.node {
  display: block;
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 50%;
}
.blue-node { background-color: var(--blue); }
.purple-node { background-color: var(--purple); }
.green-node { background-color: var(--green); }
.yellow-node { background-color: var(--yellow); color: var(--nero); }
.red-node { background-color: var(--red); }

/* Slightly enlarge the final red node for emphasis */
.timeline-nodes.row3 .red-node {
  width: 0.9rem;
  height: 0.9rem;
}

/* Milestone cards styling */
.roadmap__card {
  background-color: var(--offwhite);
  border: 1px solid var(--silverback);
  border-radius: var(--space-2xs);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Colour blocks within each card.  First child is the header; rest
   contain the descriptive content. */
.roadmap__card .roadmap_colorBlock:first-child {
  color: var(--offwhite);
  padding: var(--space-sm) var(--space-md);
  font-weight: 600;
}
.roadmap__card .roadmap_colorBlock:not(:first-child) {
  padding: var(--space-sm) var(--space-md);
  color: var(--nero);
  background-color: var(--offwhite);
  font-size: 0.85rem;
}

/* Fine‑tune list spacing inside cards */
.roadmap__card ul {
  margin: var(--space-xs) 0 0 0;
  padding-left: 1.25rem;
}
.roadmap__card li {
  margin-bottom: 0.25rem;
}

/* Assign bespoke header colours to each milestone */
#milestone-1 .roadmap_colorBlock:first-child { background-color: var(--purple); }
#milestone-2 .roadmap_colorBlock:first-child { background-color: var(--blue); }
#milestone-3 .roadmap_colorBlock:first-child { background-color: var(--green); }
#milestone-4 .roadmap_colorBlock:first-child { background-color: var(--yellow); color: var(--nero); }
#milestone-5 .roadmap_colorBlock:first-child { background-color: var(--red); }

/* Make the final milestone span across all columns; place its
   timeline node in the centre column on the following row. */
#milestone-5 {
  grid-column: 1 / 4;
}
.timeline-nodes.row3 {
  grid-column: 2;
  /* Centre the single node in the final group */
  align-items: center;
  justify-content: center;
  min-height: 3rem;
}

/* Responsive layout for narrow screens.  Timeline becomes a
   left‑hand column and cards occupy the remaining width. */
@media (max-width: 900px) {
  .roadmap-grid {
    grid-template-columns: 2rem 1fr;
    gap: var(--space-md);
  }
  /* Place all cards in the right column */
  .roadmap-grid > article {
    grid-column: 2;
  }
  /* Align all timeline nodes and top node into the first column */
  .roadmap-grid > .timeline-nodes,
  .roadmap-grid > .timeline-node.top-node {
    grid-column: 1;
  }
  /* Final milestone and its node revert to standard placement */
  #milestone-5 {
    grid-column: 2;
  }
  .timeline-nodes.row3 {
    grid-column: 1;
  }
}

/* ======================================
   TIMELINE - SECTION
  ====================================== */
.section-timeline {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--space-lg) var(--space-md);
}

/* Legend / key for timeline colours */
.timeline-key {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-lg);
  margin-bottom: var(--space-md);
}

.key-item {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  font-size: 0.75rem;
}

.pill {
  display: inline-block;
  width: 1rem;
  height: 0.5rem;
  border-radius: 0.25rem;
}
.open-period { background-color: var(--green); }
.phase-i { background-color: var(--yellow); }
.phase-ii { background-color: var(--red); }

/* Container for year rings */
.timeline-years {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: var(--space-lg);
}

/* Individual year ring wrapper */
.year-unit {
  position: relative;
  width: 9rem;
  height: 9rem;
}

/* Outer ring container.  The overflow hidden combined with
   border‑radius ensures the rotated segments form a circular
   polygon. */
.polygon-ring {
  position: relative;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  overflow: hidden;
}

/* The central year label */
.center-label {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-weight: 600;
  font-size: 0.9rem;
}

/* Individual month segments.  Each segment is a right‑angled
   triangular wedge rotated around the centre of the ring. */
.polygon-ring .segment {
  position: absolute;
  width: 50%;
  height: 50%;
  top: 0;
  left: 50%;
  transform-origin: 0% 100%;
  clip-path: polygon(0 0, 100% 0, 100% 100%);
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
}

/* Month labels inside segments.  The label is positioned just
   outside the ring and rotated back so that it is upright.  A
   small translation is applied to nudge the label outward. */
.polygon-ring .segment .month {
  position: absolute;
  left: 0;
  top: 0;
  transform-origin: 0 0;
  font-size: 0.6rem;
  white-space: nowrap;
  /* Additional margin pushes the label outward from the ring so that
     it remains readable on top of the outer circumference. */
  margin-left: 0.25rem;
  margin-top: -0.45rem;
}

/* Base rotations for the 12 segments */
.year-unit .segment:nth-child(1)  { transform: rotate(0deg); }
.year-unit .segment:nth-child(2)  { transform: rotate(30deg); }
.year-unit .segment:nth-child(3)  { transform: rotate(60deg); }
.year-unit .segment:nth-child(4)  { transform: rotate(90deg); }
.year-unit .segment:nth-child(5)  { transform: rotate(120deg); }
.year-unit .segment:nth-child(6)  { transform: rotate(150deg); }
.year-unit .segment:nth-child(7)  { transform: rotate(180deg); }
.year-unit .segment:nth-child(8)  { transform: rotate(210deg); }
.year-unit .segment:nth-child(9)  { transform: rotate(240deg); }
.year-unit .segment:nth-child(10) { transform: rotate(270deg); }
.year-unit .segment:nth-child(11) { transform: rotate(300deg); }
.year-unit .segment:nth-child(12) { transform: rotate(330deg); }

/* Counter rotations for month labels to keep them upright */
.year-unit .segment:nth-child(1)  .month { transform: rotate(0deg); }
.year-unit .segment:nth-child(2)  .month { transform: rotate(-30deg); }
.year-unit .segment:nth-child(3)  .month { transform: rotate(-60deg); }
.year-unit .segment:nth-child(4)  .month { transform: rotate(-90deg); }
.year-unit .segment:nth-child(5)  .month { transform: rotate(-120deg); }
.year-unit .segment:nth-child(6)  .month { transform: rotate(-150deg); }
.year-unit .segment:nth-child(7)  .month { transform: rotate(-180deg); }
.year-unit .segment:nth-child(8)  .month { transform: rotate(-210deg); }
.year-unit .segment:nth-child(9)  .month { transform: rotate(-240deg); }
.year-unit .segment:nth-child(10) .month { transform: rotate(-270deg); }
.year-unit .segment:nth-child(11) .month { transform: rotate(-300deg); }
.year-unit .segment:nth-child(12) .month { transform: rotate(-330deg); }

/* Colour assignments per year.  Each year unit has its own
   distribution of colours based on the SBIR/SBTR schedule. */

/* 2026: JAN–APR and AUG–OCT are grey; MAY–JUL are open (green);
   NOV–DEC are Phase I (yellow). */
.year-2026 .segment:nth-child(1),
.year-2026 .segment:nth-child(2),
.year-2026 .segment:nth-child(3),
.year-2026 .segment:nth-child(4),
.year-2026 .segment:nth-child(8),
.year-2026 .segment:nth-child(9),
.year-2026 .segment:nth-child(10) {
  background-color: var(--gray);
}
.year-2026 .segment:nth-child(5),
.year-2026 .segment:nth-child(6),
.year-2026 .segment:nth-child(7) {
  background-color: var(--green);
}
.year-2026 .segment:nth-child(11),
.year-2026 .segment:nth-child(12) {
  background-color: var(--yellow);
}

/* 2027: JAN–APR and DEC are Phase I; MAY–NOV are Phase II. */
.year-2027 .segment:nth-child(1),
.year-2027 .segment:nth-child(2),
.year-2027 .segment:nth-child(3),
.year-2027 .segment:nth-child(4),
.year-2027 .segment:nth-child(12) {
  background-color: var(--yellow);
}
.year-2027 .segment:nth-child(5),
.year-2027 .segment:nth-child(6),
.year-2027 .segment:nth-child(7),
.year-2027 .segment:nth-child(8),
.year-2027 .segment:nth-child(9),
.year-2027 .segment:nth-child(10),
.year-2027 .segment:nth-child(11) {
  background-color: var(--red);
}

/* 2028: all months Phase II. */
.year-2028 .segment {
  background-color: var(--red);
}

/* 2029: JAN–JUN and DEC are Phase II; JUL–NOV are grey. */
.year-2029 .segment:nth-child(1),
.year-2029 .segment:nth-child(2),
.year-2029 .segment:nth-child(3),
.year-2029 .segment:nth-child(4),
.year-2029 .segment:nth-child(5),
.year-2029 .segment:nth-child(6),
.year-2029 .segment:nth-child(12) {
  background-color: var(--red);
}
.year-2029 .segment:nth-child(7),
.year-2029 .segment:nth-child(8),
.year-2029 .segment:nth-child(9),
.year-2029 .segment:nth-child(10),
.year-2029 .segment:nth-child(11) {
  background-color: var(--gray);
}

/* Responsive stacking of rings on very narrow devices */
@media (max-width: 600px) {
  .timeline-years {
    flex-direction: column;
    align-items: center;
  }
  .year-unit {
    width: 8rem;
    height: 8rem;
  }
}
