/* ======================================
   CALENDAR - SECTION
  ====================================== */

/* Root variables for sizing */
.section-calendar {
   --offset-unit: 1.5rem; /* horizontal/vertical indentation per offset unit */
   --circle-size: 1.1rem; /* diameter of each day cell */
   font-family: "Lato", sans-serif;
    color: var(--nero);
 }
 
 /* Ensure tables have no inherent spacing */
 .section-calendar table {
   border-collapse: collapse;
   margin: 0;
   padding: 0;
 }
 
 /* Assign offsets for each month; the value applies both horizontally (desktop)
    and vertically (mobile) to align the month relative to the day-of-week. */
 .section-calendar .month.january   { --offset: 5; }
 .section-calendar .month.february  { --offset: 1; }
 .section-calendar .month.march     { --offset: 3; }
 .section-calendar .month.april     { --offset: 6; }
 .section-calendar .month.may       { --offset: 1; }
 .section-calendar .month.june      { --offset: 6; }
 .section-calendar .month.july      { --offset: 7; }
 .section-calendar .month.august    { --offset: 1; }
 .section-calendar .month.september { --offset: 5; }
 .section-calendar .month.october   { --offset: 0; }
 .section-calendar .month.november  { --offset: 3; }
 .section-calendar .month.december  { --offset: 3; }

/*
 * The weekday header rows (the first and last tables in the calendar) need to
 * align with the first day of January.  To achieve this the header is given
 * its own offset of 5, matching the offset assigned to January.  This
 * variable is subsequently used by the responsive rules to shift the
 * header rightward on desktop and downward on mobile.
 */
.section-calendar .month.weekdays {
  --offset: 5;
}
 
/* Style weekday header cells.  Weight and case are common to both layouts. */
.section-calendar .month.weekdays td {
  font-weight: bold;
  text-transform: uppercase;
  font-size: 0.7rem;
  /* padding and white-space will be overridden in responsive rules */
}
 
 /* Desktop (wide viewport) styles */
 @media (min-width: 768px) {
   /* Container holds all tables; stack them vertically */
   .section-calendar .calendar-blocks {
     display: block;
   }
   /* Show the first and last weekday rows.  Shift them right by their
      offset so that the day names line up with the month that starts
      with the same offset (January has an offset of 5). */
   .section-calendar .month.weekdays {
     display: block;
     width: 100%;
     /* apply horizontal indentation based on header offset */
     margin-left: calc(var(--offset) * var(--offset-unit));
     margin-bottom: 0.75rem;
   }
   .section-calendar .calendar-blocks table.month.weekdays:last-child {
     margin-top: 0.75rem;
   }
  /* Render the weekday row.  Each cell is displayed inline horizontally
     but the text inside is rotated vertically so the first, second and
     third letters of each abbreviation align in three horizontal bands. */
  .section-calendar .month.weekdays tr,
  .section-calendar .month.weekdays td {
    display: inline-block;
    white-space: nowrap;
  }
  .section-calendar .month.weekdays td {
    /* rotate day names into vertical columns */
    writing-mode: vertical-rl;
    text-orientation: upright;
    /* constrain width equal to day circle size so the vertical stack of
       letters aligns with the circles below */
    width: var(--circle-size);
    /* remove horizontal padding (set above) and add a small right margin */
    padding: 0;
    margin-right: 0.375rem;
  }
  
   /* Style month tables for horizontal flow */
   .section-calendar .calendar-blocks table.month:not(.weekdays) {
     /* Use flex to place month label and days row next to each other */
     display: flex;
     flex-direction: row;
     align-items: center;
     /* Use the offset to indent the entire month row to the right */
     margin-left: calc(var(--offset) * var(--offset-unit));
     margin-bottom: 0.5rem;
   }
   /* Month heading (e.g., JANUARY).  Reduce the width and padding so that
      the label sits closer to its row of circles. */
   .section-calendar .calendar-blocks table.month:not(.weekdays) thead {
     flex: 0 0 5rem;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) thead th {
     text-align: left;
     font-size: 0.8rem;
     text-transform: uppercase;
     padding-right: 0.25rem;
     white-space: nowrap;
   }
   /* Days row: break out of table layout */
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody {
     flex: 1;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody tr {
     display: block;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody td {
     display: inline-block;
     width: var(--circle-size);
     height: var(--circle-size);
     border-radius: 50%;
     background-color: var(--nero);
     color: var(--offwhite);
     text-align: center;
     line-height: var(--circle-size);
     margin-right: 0.3rem;
     font-size: 0.55rem;
   }
 }
 
 /* Mobile (narrow viewport) styles */
 @media (max-width: 767px) {
   /* The calendar-blocks container becomes a horizontal strip of vertical months */
   .section-calendar .calendar-blocks {
     display: flex;
     flex-direction: row;
     align-items: flex-start;
     overflow-x: auto;
   }
  /* In narrow view the weekday header tables become vertical
     lists on the left and right of the calendar. */
  /*
   * In the narrow/mobile layout the weekday header tables become
   * vertical lists that flank the grid of month columns.  Each list
   * must occupy a fixed width so that it doesn’t shrink as the user
   * scrolls horizontally, and its cells should stack top‑to‑bottom
   * with a small gap between entries.  Using a flex container allows
   * the single <tr> containing all weekday cells to break into a
   * column of rows.  The margin shorthand collapses the original
   * left/right spacing rules into a single property.
   */
  .section-calendar .month.weekdays {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex-shrink: 0;
    /* reserve horizontal space roughly equal to the day cell width
       plus a little extra for legibility */
    width: calc(var(--circle-size) * 1.8);
    /* push the weekday list downward so that its first entry aligns with
       the first day of January (offset of 5).  The vertical offset
       uses the same unit as month offsets. */
    margin-top: calc(var(--offset) * var(--offset-unit));
    margin-left: 0.5rem;
    margin-right: 0.5rem;
  }
  .section-calendar .month.weekdays tr {
    display: flex;
    flex-direction: column;
    margin: 0;
    padding: 0;
  }
  .section-calendar .month.weekdays td {
    display: block;
    padding: 0;
    margin: 0;
    /* space between weekday labels to align with the circle gap */
    margin-bottom: 0.3rem;
    width: 100%;
    white-space: nowrap;
    text-align: left;
    /* capitalize so that Sun/MON look consistent */
    text-transform: capitalize;
  }
   /* Each month becomes a vertical column. The offset pushes it downward. */
   .section-calendar .calendar-blocks table.month:not(.weekdays) {
     display: flex;
     flex-direction: column;
     align-items: center;
     margin-right: 0.75rem;
     margin-top: calc(var(--offset) * var(--offset-unit));
   }
  /* Rotate and stack the month heading vertically.  The text flows top-to-bottom
     without being flipped so the first letter appears at the top. */
  .section-calendar .calendar-blocks table.month:not(.weekdays) thead th {
    writing-mode: vertical-rl;
    text-orientation: upright;
    /* remove the 180deg rotation so letters are not upside down */
    transform: none;
    font-size: 0.7rem;
    margin-bottom: 0.5rem;
    white-space: nowrap;
    /* center the rotated text relative to its column */
    align-self: center;
  }
   /* Days column: show each day as its own row */
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody tr {
     display: flex;
     flex-direction: column;
   }
   .section-calendar .calendar-blocks table.month:not(.weekdays) tbody td {
     display: block;
     width: var(--circle-size);
     height: var(--circle-size);
     border-radius: 50%;
     background-color: var(--nero);
     color: var(--offwhite);
     line-height: var(--circle-size);
     margin-bottom: 0.3rem;
     font-size: 0.55rem;
   }
 }

/* ======================================
   ROADMAP - SECTION
  ====================================== */

section {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  max-width: 1000px;
  margin: 0 auto;
  padding: 40px 20px;
  background-color: var(--bg-cream);
}

/* The Vertical Roadmap Line */
section::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  width: 2px;
  background: var(--line-color);
  transform: translateX(-50%);
}

/* Individual Nodes (Dots) */
.node {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  z-index: 2;
  margin: 10px 0;
  border: 2px solid white;
}

/* The Cards */
.roadmap__card {
  width: 45%; /* Keeps cards from hitting the center line */
  display: flex;
  flex-direction: column;
  margin-bottom: 30px;
  border: 1px solid var(--line-color);
  background: white;
  z-index: 1;
}

/* Desktop Zig-Zag Logic */
/* Odd articles (1st, 3rd, 5th) go to the RIGHT */
article:nth-of-type(odd) {
  align-self: flex-end;
}

/* Even articles (2nd, 4th) go to the LEFT */
article:nth-of-type(even) {
  align-self: flex-start;
}

/* Styling the color blocks inside cards */
.roadmap_colorBlock:first-child {
  padding: 10px;
  color: white;
  text-align: center;
}

/* Match colors to the specific steps */
article:nth-of-type(1) .roadmap_colorBlock:first-child { background: var(--blue); }
article:nth-of-type(2) .roadmap_colorBlock:first-child { background: var(--purple); }
article:nth-of-type(3) .roadmap_colorBlock:first-child { background: var(--green); }
article:nth-of-type(4) .roadmap_colorBlock:first-child { background: var(--yellow); }
article:nth-of-type(5) .roadmap_colorBlock:first-child { background: var(--red); }

.roadmap_colorBlock:last-child {
  padding: 15px;
  background: white;
  font-size: 0.9rem;
}

/* Clean up the list items */
.roadmap_colorBlock li {
  list-style: disc;
  margin-left: 20px;
  margin-bottom: 5px;
}

/* --- MOBILE RESPONSIVE --- */
@media (max-width: 768px) {
  section::before {
    left: 30px; /* Move line to left */
  }

  .node {
    align-self: flex-start;
    margin-left: 20px; /* Align with line */
  }

  .roadmap__card {
    width: calc(100% - 60px); /* Fill width minus line space */
    align-self: flex-end !important; /* Force all cards to the right */
  }
}
/* ======================================
   TIMELINE - SECTION
  ====================================== */
.section-timeline {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 40px;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
}

/* --- Top Row: Key --- */
.timeline-key {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    padding: 15px 30px;
    background: rgba(255, 255, 255, 0.5); /* Optional subtle backing */
    border: 1px solid #ccc;
    border-radius: 4px;
}

.key-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.85rem;
    font-weight: bold;
    color: #333;
    text-transform: uppercase;
}

.pill {
    width: 40px;
    height: 20px;
    border-radius: 20px; /* Pill shape */
    display: inline-block;
}

.pill.open-period { background-color: var(--green); }
.pill.phase-i     { background-color: var(--yellow); }
.pill.phase-ii    { background-color: var(--red); }


/* --- Bottom Row: Year Polygons --- */
.timeline-years {
    display: flex;
    flex-wrap: wrap; /* Wraps on smaller screens */
    justify-content: center;
    gap: 20px;
    width: 100%;
}

.year-unit {
    flex: 0 0 auto;
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

/* --- The Polygon Geometry --- */
.polygon-ring {
    position: relative;
    width: var(--ring-size);
    height: var(--ring-size);
    border-radius: 50%; /* Just for debugging bounding box */
}

/* The Year Label in the center */
.center-label {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: transparent;
    border: 1px solid #aaa;
    padding: 5px 15px;
    font-size: 1.1rem;
    font-weight: bold;
    color: #333;
    z-index: 10;
    background-color: rgba(255,255,255,0.4);
}

/* The Segment Slices */
.segment {
    position: absolute;
    top: 50%;
    left: 50%;
    /* Geometry Logic:
       We create a trapezoid shape.
       Width is roughly calculated based on circumference of a 12-sided polygon.
       Height determines the thickness of the ring.
    */
    width: 64px; 
    height: 45px; 
    
    /* Transform Origin pushes the segment out from center to form ring */
    transform-origin: center 120px; /* 120px is half of --ring-size */
    
    /* Create the trapezoid shape for the polygon look */
    clip-path: polygon(15% 0%, 85% 0%, 100% 100%, 0% 100%);
    
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding-top: 5px;
    
    /* Text styling inside segment */
    font-size: 0.45rem;
    color: rgba(0,0,0,0.6);
    font-weight: bold;
    box-sizing: border-box;
}

/* Segment Colors */
.segment.grey { background-color: var(--grey); color: #888; }
.segment.open { background-color: var(--green); }
.segment.p1   { background-color: var(--yellow); }
.segment.p2   { background-color: var(--red); }


/* --- Segment Rotations (12 segments = 30deg increments) --- */
/* We start at -15deg offset so Jan is at roughly 7 o'clock or match image orientation */
/* Based on image, Jan is at bottom-left roughly (approx 210 deg). 
   Let's just do standard clock first: 12 at top.
   The image has Jan at index 7 (roughly 7 o'clock). 
   Let's rotate them purely by index * 30deg. 
*/

.segment:nth-child(2)  { transform: translate(-50%, -100%) rotate(210deg); } /* JAN */
.segment:nth-child(3)  { transform: translate(-50%, -100%) rotate(240deg); } /* FEB */
.segment:nth-child(4)  { transform: translate(-50%, -100%) rotate(270deg); } /* MAR */
.segment:nth-child(5)  { transform: translate(-50%, -100%) rotate(300deg); } /* APR */
.segment:nth-child(6)  { transform: translate(-50%, -100%) rotate(330deg); } /* MAY */
.segment:nth-child(7)  { transform: translate(-50%, -100%) rotate(0deg); }   /* JUN */
.segment:nth-child(8)  { transform: translate(-50%, -100%) rotate(30deg); }  /* JUL */
.segment:nth-child(9)  { transform: translate(-50%, -100%) rotate(60deg); }  /* AUG */
.segment:nth-child(10) { transform: translate(-50%, -100%) rotate(90deg); }  /* SEP */
.segment:nth-child(11) { transform: translate(-50%, -100%) rotate(120deg); } /* OCT */
.segment:nth-child(12) { transform: translate(-50%, -100%) rotate(150deg); } /* NOV */
.segment:nth-child(13) { transform: translate(-50%, -100%) rotate(180deg); } /* DEC */

/* Note: The nth-child index starts at 2 because the .center-label is child 1 
*/


/* --- Responsive Adjustments --- */

/* Mobile / Narrow View (Default flex-wrap behavior handles this, but we can force it) */
@media (max-width: 1100px) {
    .timeline-years {
        flex-direction: column;
        align-items: center;
    }
}

/* Adjust labels for clarity */
.month {
    transform: rotate(180deg); /* Flips text so it faces inward/outward correctly if needed */
    background: rgba(255,255,255,0.7);
    padding: 1px 3px;
    border-radius: 2px;
    font-size: 8px;
    margin-top: 2px;
}
